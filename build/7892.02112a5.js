"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[7892,1385],{21385:(t,e,s)=>{s.r(e),s.d(e,{ISettings:()=>l,Settings:()=>g});var a=s(58291),i=s(60850),n=s(20927),r=s.n(n);const o="JupyterLite Storage";class g{constructor(t){this._settingsStorageName=o,this._settingsStorageName=(t||{}).settingsStorageName||o,this._storage=this.defaultSettingsStorage()}defaultSettingsStorage(){return r().createInstance({name:this._settingsStorageName,description:"Offline Storage for Settings",storeName:"settings",version:1})}async get(t){let e=(await this.getAll()).settings.find((e=>e.id===t));return e||(e=await this._getFederated(t)),e}async getAll(){var t;const e=null!==(t=a.PageConfig.getOption("settingsUrl"))&&void 0!==t?t:"/",s=await(await fetch(a.URLExt.join(e,"all.json"))).json(),n=await Promise.all(s.map((async t=>{var e;const{id:s}=t,a=null!==(e=await this._storage.getItem(s))&&void 0!==e?e:t.raw;return{...c.override(t),raw:a,settings:i.parse(a)}})));return{settings:n}}async save(t,e){await this._storage.setItem(t,e)}async _getFederated(t){var e;const[s,n]=t.split(":");if(!c.isFederated(s))return;const r=a.PageConfig.getOption("fullLabextensionsUrl"),o=a.URLExt.join(r,s,"schemas",s,`${n}.json`),g=a.URLExt.join(r,s,"package.json"),l=await(await fetch(o)).json(),d=await(await fetch(g)).json(),f=null!==(e=await this._storage.getItem(t))&&void 0!==e?e:"{}",u=i.parse(f)||{};return c.override({id:t,raw:f,schema:l,settings:u,version:d.version||"3.0.8"})}}var c;!function(t){const e=JSON.parse(a.PageConfig.getOption("settingsOverrides")||"{}");t.isFederated=function(t){let e;try{e=JSON.parse(a.PageConfig.getOption("federated_extensions"))}catch{return!1}for(const{name:s}of e)if(s===t)return!0;return!1},t.override=function(t){if(e[t.id]){t.schema.properties||(t.schema.properties={});for(const[s,a]of Object.entries(e[t.id]||{}))t.schema.properties[s].default=a}return t}}(c||(c={}));const l=new(s(74547).Token)("@jupyterlite/settings:ISettings")}}]);
//# sourceMappingURL=7892.02112a5.js.map